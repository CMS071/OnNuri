<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.onnuri.dao.HumorBoardMapper">

     <!-- 전체 게시글 목록 조회 -->
    <select id="getAllHumors" resultType="com.onnuri.dto.HumorBoardDto">
        SELECT * FROM humor_board ORDER BY humor_idx DESC
    </select>

    <!-- 특정 게시글 1건 상세 조회 -->
    <select id="getHumorById" parameterType="int" resultType="com.onnuri.dto.HumorBoardDto">
        SELECT * FROM humor_board WHERE humor_idx = #{humor_idx}
    </select>

    <!-- 게시글 등록 -->
    <insert id="insertHumor" parameterType="com.onnuri.dto.HumorBoardDto">
        INSERT INTO humor_board (humor_title, humor_contents, humor_img, user_num)
        VALUES (#{humor_title}, #{humor_contents}, #{humor_img}, #{user_num})
    </insert>

    <!-- 게시글 수정 -->
    <update id="updateHumor" parameterType="com.onnuri.dto.HumorBoardDto">
        UPDATE humor_board
        SET humor_title = #{humor_title},
            humor_contents = #{humor_contents},
            humor_img = #{humor_img}
        WHERE humor_idx = #{humor_idx}
    </update>

    <!-- 게시글 삭제 -->
    <delete id="deleteHumor" parameterType="int">
        DELETE FROM humor_board WHERE humor_idx = #{humor_idx}
    </delete>

    <!-- 게시글 조회수 1 증가 -->
    <update id="incrementViewCount" parameterType="int">
        UPDATE humor_board SET humor_cnt = humor_cnt + 1
        WHERE humor_idx = #{humor_idx}
    </update>

</mapper>